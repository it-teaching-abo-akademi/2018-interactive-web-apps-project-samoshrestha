(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t,a){e.exports=a(281)},195:function(e,t){},197:function(e,t){},22:function(e,t){e.exports={MAX_PORTFOLIO:10,MAX_SYMBOLS:50,ALPHA_VANTAGE_KEY:"FZ5782SHF692JV73",ALPHA_VANTAGE_KEY_2:"1IV0FFNEFTB5KDDQ",ALPHA_VANTAGE_KEY_3:"AVJWG8L8PN94JDXO",ALPHA_VANTAGE_KEY_4:"11OITLZ6A9F4BGOE",FUNCTION_TIME_SERIES:"TIME_SERIES_DAILY_ADJUSTED"}},232:function(e,t){},233:function(e,t){},281:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(29),s=a.n(o),l=a(116),c=a(6),i=a.n(c),u=a(14),p=a(21),h=a(30),d=a(33),f=a(31),m=a(34),E=a(7),k=function(e){return r.a.createElement("div",{className:"navbar-fixed"},r.a.createElement("nav",{className:"nav-wrapper blue lighten-1"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{href:"/",className:"brand-logo"},"SPMS"))))},b=a(26),g=a(111),y=a(67),S=(a(168),a(22)),v=a.n(S),x=a(42),w=a.n(x),A=function e(){Object(p.a)(this,e),this.getValue=function(){var e=Object(u.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get(this.url+"function="+v.a.FUNCTION_TIME_SERIES+"&apikey="+v.a.ALPHA_VANTAGE_KEY+"&symbol="+t);case 2:if(!(a=e.sent).data["Error Message"]){e.next=5;break}return e.abrupt("return",!1);case 5:e.t0=i.a.keys(a.data["Time Series (Daily)"]);case 6:if((e.t1=e.t0()).done){e.next=11;break}return n=e.t1.value,e.abrupt("break",11);case 11:return e.abrupt("return",parseFloat(a.data["Time Series (Daily)"][n]["5. adjusted close"]).toFixed(2));case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.getEuroEchangeRate=Object(u.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency=USD&to_currency=EUR&apikey=11OITLZ6A9F4BGOE");case 2:if(!(t=e.sent).data["Error Message"]){e.next=5;break}return e.abrupt("return",!1);case 5:return e.abrupt("return",parseFloat(t.data["Realtime Currency Exchange Rate"]["5. Exchange Rate"]));case 6:case"end":return e.stop()}},e,this)})),this.getDailyTimeSeries=function(e){return w.a.get(this.url+"function=TIME_SERIES_DAILY_ADJUSTED&apikey="+v.a.ALPHA_VANTAGE_KEY_1+"&symbol="+e)},this.getWeeklyTimeSeries=function(e){return w.a.get(this.url+"function=TIME_SERIES_WEEKLY_ADJUSTED&apikey="+v.a.ALPHA_VANTAGE_KEY_2+"&symbol="+e)},this.url="https://www.alphavantage.co/query?"},D=a(43),I=a.n(D),O=new A,N=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(d.a)(this,Object(f.a)(t).call(this))).updateStockNameInput=function(t){e.setState({stockNameInput:t.target.value})},e.updateQuantityInput=function(t){e.setState({quantityInput:t.target.value})},e.addStock=Object(u.a)(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.state.quantityInput||alert("Quantity must be specified"),t.next=3,e.props.addStock(e.props.id,e.state.stockNameInput,parseInt(e.state.quantityInput));case 3:if(!t.sent){t.next=7;break}alert("Stock created succesfully"),t.next=8;break;case 7:alert("Failed to create stock");case 8:case"end":return t.stop()}},t,this)})),e.calculateTotal=function(){for(var t=0,a=0;a<e.props.stocks.length;a++)t+=e.props.stockValues[e.props.stocks[a].symbol]*e.props.stocks[a].quantity;return t+""},e.changeToEuro=function(){e.setState({currency:"euro"})},e.changeToDollar=function(){e.setState({currency:"dollar"})},e.showGraph=Object(u.a)(i.a.mark(function t(){var a,n,r,o,s,l,c,u,p,h,d,f;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({graphLoading:!0}),a=e.state.startDateMoment,n=e.state.endDateMoment,r=!0,null!=a&&null==n&&(n=I()(new Date)),null==a&&null!=n?r=!1:null!=a&&null!=n&&Math.abs(a.diff(n,"days"))>120&&(r=!1),o=e.props.stocks,s=[["Stocks"]],l=0;case 9:if(!(l<o.length)){t.next=40;break}if(s[0].push(o[l].symbol),!r){t.next=17;break}return t.next=14,O.getDailyTimeSeries(o[l].symbol);case 14:c=t.sent.data["Time Series (Daily)"],t.next=20;break;case 17:return t.next=19,O.getWeeklyTimeSeries(o[l].symbol);case 19:c=t.sent.data["Weekly Adjusted Time Series"];case 20:if(c){t.next=23;break}return alert("Free API limit has expired. Please wait 1 minute"),t.abrupt("return");case 23:u=1,t.t0=i.a.keys(c);case 25:if((t.t1=t.t0()).done){t.next=37;break}if(p=t.t1.value,h=I()(p),null==a||!h.isBefore(a)){t.next=30;break}return t.abrupt("break",37);case 30:if(null==n||!h.isAfter(n)){t.next=32;break}return t.abrupt("break",37);case 32:s.length==u&&s.push([p]),s[u].push(parseFloat(c[p]["4. close"])),u++,t.next=25;break;case 37:l++,t.next=9;break;case 40:d=[s[0]],(f=s.slice(1)).reverse(),d=d.concat(f),e.setState({showGraph:!0,graphData:d,graphLoading:!1});case 46:case"end":return t.stop()}},t,this)})),e.hideGraph=function(){e.setState({showGraph:!1})},e.state={stockNameInput:"",quantityInput:"",currency:"dollar",showGraph:!1,graphData:[],startDate:null,startDateMoment:null,endDate:null,endDateMoment:null,graphLoading:!1},e.handleStartDateChange=e.handleStartDateChange.bind(Object(b.a)(Object(b.a)(e))),e.handleEndDateChange=e.handleEndDateChange.bind(Object(b.a)(Object(b.a)(e))),e}return Object(m.a)(t,e),Object(h.a)(t,[{key:"handleStartDateChange",value:function(){var e=Object(u.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=I()(t),e.next=3,this.setState({startDate:t,startDateMoment:a});case 3:this.showGraph();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleEndDateChange",value:function(){var e=Object(u.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=I()(t),e.next=3,this.setState({endDate:t,endDateMoment:a});case 3:this.showGraph();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.deleteStock,a=this.props.id,n=this.props.stockValues,o=this.props.euroExchangeRate.toFixed(2),s=this.state.currency;return this.state.showGraph?r.a.createElement("div",null,r.a.createElement(E.Button,{waves:"light",onClick:this.hideGraph},"Back"),this.state.graphLoading?r.a.createElement("div",{style:{width:"100%",height:"400px"}},r.a.createElement("p",null,"Graph is loading")):r.a.createElement(g.a,{chartType:"LineChart",data:this.state.graphData,width:"100%",height:"400px",legendToggle:!0}),r.a.createElement("div",{style:{width:"50vh",marginLeft:"40px",backgroundColor:"#ccf",padding:"30px"}},r.a.createElement("h6",null,"Filters"),r.a.createElement("p",null,"Start Date"),r.a.createElement(y.a,{selected:this.state.startDate,onChange:this.handleStartDateChange}),r.a.createElement("p",null,"End Date"),r.a.createElement(y.a,{selected:this.state.endDate,onChange:this.handleEndDateChange}))):r.a.createElement(E.Col,{s:12,m:5},r.a.createElement(E.CardPanel,null,"dollar"===this.state.currency?r.a.createElement(E.Button,{waves:"light",onClick:this.changeToEuro},"Show in Euros"):r.a.createElement(E.Button,{waves:"light",onClick:this.changeToDollar},"Show In Dollars"),r.a.createElement("a",{onClick:function(){return e.props.deletePortfolio(e.props.id)}},r.a.createElement("i",{className:"material-icons red-text",style:{float:"right"}},"delete")),r.a.createElement("h4",null,this.props.title),r.a.createElement(E.Table,{hoverable:!0,responsive:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{"data-field":"name"},"Name"),r.a.createElement("th",{"data-field":"unitValue"},"Unit Value"),r.a.createElement("th",{"data-field":"quantity"},"Quantity"),r.a.createElement("th",{"data-field":"total"},"Total"),r.a.createElement("th",{"data-field":"delete"},"Delete"))),r.a.createElement("tbody",null,this.props.stocks.map(function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.symbol),r.a.createElement("td",null,"dollar"===s?"$":"\u20ac","dollar"===s?(1*n[e.symbol]).toFixed(2):(n[e.symbol]*o).toFixed(2)),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null,"dollar"===s?"$":"\u20ac","dollar"===s?(e.quantity*n[e.symbol]*1).toFixed(2):e.quantity*(n[e.symbol]*o).toFixed(2)),r.a.createElement("td",null,r.a.createElement("a",{onClick:function(){return t(a,e.id)}},r.a.createElement("i",{className:"material-icons red-text tiny"},"delete"))))}))),r.a.createElement("h6",null,"Total Value : ","dollar"===s?"$":"\u20ac","dollar"===s?(1*this.calculateTotal()).toFixed(2):(this.calculateTotal()*o).toFixed(2)),r.a.createElement("br",null),r.a.createElement(E.Modal,{header:"Add Stock",bottomSheet:!0,trigger:r.a.createElement("a",{className:"waves-effect waves-light btn-small"},r.a.createElement("i",{className:"material-icons left"},"add"),"Add Stocks ")},r.a.createElement(E.Row,null,r.a.createElement(E.Input,{s:12,label:"Stock Symbol",id:"symbolName",onChange:this.updateStockNameInput,required:!0}),r.a.createElement(E.Input,{s:12,label:"Quantity",id:"quantity",onChange:this.updateQuantityInput,type:"number",required:!0}),r.a.createElement("br",null),r.a.createElement(E.Button,{waves:"light",onClick:this.addStock},"Create",r.a.createElement(E.Icon,{right:!0},"send")))),r.a.createElement("a",{className:"waves-effect waves-light btn-small green lighten-1",onClick:this.showGraph},"Show Graphs")))}}]),t}(n.Component),T=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.addStock,t=this.props.deletePortfolio,a=this.props.deleteStock,n=this.props.stockValues,o=this.props.euroExchangeRate;return r.a.createElement("div",null,r.a.createElement(E.Row,null,this.props.portfolios.map(function(s){return r.a.createElement(N,{title:s.title,key:s.id,id:s.id,stocks:s.stocks,addStock:e,deletePortfolio:t,deleteStock:a,stockValues:n,euroExchangeRate:o})})))}}]),t}(n.Component),_=a(190),C=new A,j=function(e){function t(){var e;Object(p.a)(this,t),(e=Object(d.a)(this,Object(f.a)(t).call(this))).getEuroRate=Object(u.a)(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.getEuroEchangeRate();case 2:(a=t.sent)?e.setState({euroExchangeRate:a}):alert("Failed to fetch euro exchange rate");case 4:case"end":return t.stop()}},t,this)})),e.computeStockPrices=Object(u.a)(i.a.mark(function t(){var a,n,r,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=0;case 1:if(!(a<e.state.portfolios.length)){t.next=16;break}n=0;case 3:if(!(n<e.state.portfolios[a].stocks.length)){t.next=13;break}return t.next=6,C.getValue(e.state.portfolios[a].stocks[n].symbol);case 6:r=t.sent,(o=e.state.stockValues)[e.state.portfolios[a].stocks[n].symbol]=r,e.setState({stockValues:o});case 10:n++,t.next=3;break;case 13:a++,t.next=1;break;case 16:case"end":return t.stop()}},t,this)})),e.addPortfolio=function(t){if(e.state.portfolios.length===v.a.MAX_PORTFOLIO)alert("You cannot create anymore portfolios");else if(e.state.portfolioNameInput){var a=e.state.portfolioNameInput;e.setState({portfolios:Object(l.a)(e.state.portfolios).concat([{id:_.generate(),title:a,stocks:[]}])},function(){alert("Portfolio has been created")})}else alert("Portfolio Name cant be empty")},e.deleteStock=function(t,a){for(var n=e.state.portfolios,r=0;r<n.length;r++)if(n[r].id===t){for(var o=e.state.portfolios[r].stocks,s=0;s<o.length;s++)if(o[s].id===a){o.splice(s,1),n[r].stocks=o,e.setState({portfolios:n});break}break}},e.deletePortfolio=function(t){for(var a=e.state.portfolios,n=0;n<a.length;n++)if(a[n].id===t){a.splice(n,1),e.setState({portfolios:a});break}},e.updatePortfolioNameInput=function(t){e.setState({portfolioNameInput:t.target.value})},e.addStock=function(){var t=Object(u.a)(i.a.mark(function t(a,n,r){var o,s,l,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.getValue(n);case 2:if(o=t.sent,(s=e.state.stockValues)[n.toUpperCase()]=o,e.setState({stockValues:s}),o){t.next=11;break}return alert("Invalid Symbol"),t.abrupt("return",!1);case 11:l=e.state.portfolios,c=0;case 13:if(!(c<l.length)){t.next=23;break}if(l[c].id!==a){t.next=20;break}if(l[c].stocks.length!==v.a.MAX_SYMBOLS){t.next=18;break}return alert("Cannot create anymore stocks in this portfolio"),t.abrupt("return",!1);case 18:l[c].stocks.push({id:_.generate(),symbol:n.toUpperCase(),value:o,quantity:r}),e.setState({portfolios:l});case 20:c++,t.next=13;break;case 23:return t.abrupt("return",!0);case 24:case"end":return t.stop()}},t,this)}));return function(e,a,n){return t.apply(this,arguments)}}(),e.state={portfolioNameInput:null,portfolios:[],stockValues:{},euroExchangeRate:0};var a=localStorage.getItem("portfolios");return a&&(e.state.portfolios=JSON.parse(a)),e.computeStockPrices(),e.getEuroRate(),e}return Object(m.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(){localStorage.setItem("portfolios",JSON.stringify(this.state.portfolios))}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(k,null),r.a.createElement(E.Modal,{header:"Add Portfolio",bottomSheet:!0,id:"createPortfolio",trigger:r.a.createElement("a",{href:"#portfolioForm",className:"btn-floating btn-large waves-effect waves-light red pulse",style:{position:"fixed",bottom:"10%",right:"10%"}},r.a.createElement("i",{className:"material-icons"},"add"))},r.a.createElement(E.Row,null,r.a.createElement(E.Input,{s:12,label:"Portfolio Name",id:"portfolioName",onChange:this.updatePortfolioNameInput,required:!0}),r.a.createElement("br",null),r.a.createElement(E.Button,{waves:"light",onClick:this.addPortfolio},"Create",r.a.createElement(E.Icon,{right:!0},"send")))),r.a.createElement(T,{portfolios:this.state.portfolios,addStock:this.addStock,deletePortfolio:this.deletePortfolio,deleteStock:this.deleteStock,stockValues:this.state.stockValues,euroExchangeRate:this.state.euroExchangeRate}))}}]),t}(n.Component);s.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[117,2,1]]]);
//# sourceMappingURL=main.d498dc20.chunk.js.map